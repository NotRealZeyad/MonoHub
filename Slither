-- LocalScript in StarterPlayerScripts

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

-- Function to enable slither movement
local function enableSlitherMovement()
    humanoid.WalkSpeed = 10
    humanoid.JumpPower = 0

    local bodyGyro = Instance.new("BodyGyro")
    bodyGyro.Parent = rootPart
    bodyGyro.MaxTorque = Vector3.new(0, math.huge, 0)

    game:GetService("RunService").RenderStepped:Connect(function()
        if character and character:FindFirstChild("HumanoidRootPart") then
            bodyGyro.CFrame = CFrame.new(rootPart.Position, rootPart.Position + rootPart.CFrame.LookVector)
        end
    end)

    humanoid.Running:Connect(function(speed)
        if speed > 0 then
            humanoid:Move(Vector3.new(0, 0, 1), true)
        end
    end)
end

-- Notify the server to create snake limbs
game.ReplicatedStorage:WaitForChild("CreateSnakeLimbs"):FireServer()

-- Start the transformation
enableSlitherMovement()
